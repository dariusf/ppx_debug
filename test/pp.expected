let ppx_debug_file = Ppx_debug_runtime.Trace.new_channel "test"
let fact n =
  let fact_original self n = match n with | 0 -> 1 | n -> n * (self (n - 1)) in
  let rec aux n =
    (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
       Ppx_debug_runtime.Config.read () in
     Ppx_debug_runtime.Trace.emit_start ~ppx_debug_file ~func:"fact");
    ((let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
        Ppx_debug_runtime.Config.read () in
      Ppx_debug_runtime.Trace.emit_argument ~ppx_debug_file
        ~ppx_debug_id:("test.ml", "func", 0) "n" n);
     ());
    (let res = fact_original aux n in
     (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
        Ppx_debug_runtime.Config.read () in
      Ppx_debug_runtime.Trace.emit_argument ~ppx_debug_file
        ~ppx_debug_id:("test.ml", "func", 1) "res" res);
     (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
        Ppx_debug_runtime.Config.read () in
      Ppx_debug_runtime.Trace.emit_end ~ppx_debug_file ~func:"fact");
     res) in
  aux n
let _ = fun () -> ()
type v =
  | Root of {
  value: int } 
let labelled ~l  () =
  let labelled_original ~l  () = l in
  (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
     Ppx_debug_runtime.Config.read () in
   Ppx_debug_runtime.Trace.emit_start ~ppx_debug_file ~func:"labelled");
  ((let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
      Ppx_debug_runtime.Config.read () in
    Ppx_debug_runtime.Trace.emit_argument ~ppx_debug_file
      ~ppx_debug_id:("test.ml", "func", 2) "l" l);
   ());
  (let res = labelled_original ~l () in
   (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
      Ppx_debug_runtime.Config.read () in
    Ppx_debug_runtime.Trace.emit_argument ~ppx_debug_file
      ~ppx_debug_id:("test.ml", "func", 3) "res" res);
   (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
      Ppx_debug_runtime.Config.read () in
    Ppx_debug_runtime.Trace.emit_end ~ppx_debug_file ~func:"labelled");
   res)
let optional ?(l= 1)  () =
  let optional_original ?(l= 1)  () = l in
  (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
     Ppx_debug_runtime.Config.read () in
   Ppx_debug_runtime.Trace.emit_start ~ppx_debug_file ~func:"optional");
  ((let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
      Ppx_debug_runtime.Config.read () in
    Ppx_debug_runtime.Trace.emit_argument ~ppx_debug_file
      ~ppx_debug_id:("test.ml", "func", 4) "l" l);
   ());
  (let res = optional_original ~l () in
   (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
      Ppx_debug_runtime.Config.read () in
    Ppx_debug_runtime.Trace.emit_argument ~ppx_debug_file
      ~ppx_debug_id:("test.ml", "func", 5) "res" res);
   (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
      Ppx_debug_runtime.Config.read () in
    Ppx_debug_runtime.Trace.emit_end ~ppx_debug_file ~func:"optional");
   res)
let optional_opt ?l  () =
  let optional_opt_original ?l  () = l in
  (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
     Ppx_debug_runtime.Config.read () in
   Ppx_debug_runtime.Trace.emit_start ~ppx_debug_file ~func:"optional_opt");
  ((let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
      Ppx_debug_runtime.Config.read () in
    Ppx_debug_runtime.Trace.emit_argument ~ppx_debug_file
      ~ppx_debug_id:("test.ml", "func", 6) "l" l);
   ());
  (let res = optional_opt_original ?l () in
   (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
      Ppx_debug_runtime.Config.read () in
    Ppx_debug_runtime.Trace.emit_argument ~ppx_debug_file
      ~ppx_debug_id:("test.ml", "func", 7) "res" res);
   (let Ppx_debug_runtime.Config.{ file = ppx_debug_file;_}  =
      Ppx_debug_runtime.Config.read () in
    Ppx_debug_runtime.Trace.emit_end ~ppx_debug_file ~func:"optional_opt");
   res)
